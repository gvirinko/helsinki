(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{24:function(e,n,t){},42:function(e,n,t){"use strict";t.r(n);var r=t(0),c=t(1),o=t(17),a=t.n(o),u=(t(24),t(18)),i=t(8),s=t(3),b=t(5),j=t.n(b),l="/api/persons",d=function(){return j.a.get(l).then((function(e){return e.data}))},f=function(e){return j.a.post(l,e).then((function(e){return e.data}))},h=function(e,n){return j.a.put("".concat(l,"/").concat(e),n).then((function(e){return e.data}))},m=function(e){return j.a.delete("".concat(l,"/").concat(e))},O=function(e){var n=e.onChange;return Object(r.jsxs)("p",{children:["Filter by name: ",Object(r.jsx)("input",{onChange:n})]})},v=function(e){var n=e.onChangeName,t=e.onChangeNumber,c=e.onClick,o=e.name,a=e.number;return Object(r.jsxs)("form",{children:[Object(r.jsxs)("div",{children:["Name: ",Object(r.jsx)("input",{value:o,onChange:n})]}),Object(r.jsxs)("div",{children:["Number: ",Object(r.jsx)("input",{value:a,onChange:t})]}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{type:"submit",onClick:c,children:"add"})})]})},p=function(e){var n=e.type,t=e.message;return null===t?null:Object(r.jsx)("div",{className:n,children:t})},x=function(e){var n=e.list,t=e.filter,o=Object(c.useState)(""),a=Object(s.a)(o,2),u=a[0],i=a[1],b=Object(c.useState)(),j=Object(s.a)(b,2),l=j[0],d=j[1],f=Object(c.useState)(""),h=Object(s.a)(f,2),O=h[0],v=h[1];return Object(r.jsxs)("div",{children:[Object(r.jsx)(p,{type:l,message:O}),n.filter((function(e){return e.id!==u})).filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())})).map((function(e,t){return Object(r.jsxs)("p",{children:[e.name,": ",e.number,Object(r.jsx)("button",{onClick:function(){return function(e){var t=n.find((function(n){return n.id===e}));window.confirm("Delete ".concat(t.name,"?"))&&(i(e),m(e).catch((function(e){v("Information on ".concat(t.name," has already been removed from server.")),d("error"),setTimeout((function(){v(null)}),5e3)})))}(e.id)},children:"Delete"})]},t)}))]})},g=function(){var e=Object(c.useState)(""),n=Object(s.a)(e,2),t=n[0],o=n[1],a=Object(c.useState)(""),b=Object(s.a)(a,2),j=b[0],l=b[1],m=Object(c.useState)(""),g=Object(s.a)(m,2),C=g[0],w=g[1],k=Object(c.useState)([]),N=Object(s.a)(k,2),y=N[0],S=N[1],D=Object(c.useState)(),A=Object(s.a)(D,2),T=A[0],E=A[1],I=Object(c.useState)(),J=Object(s.a)(I,2),L=J[0],B=J[1];Object(c.useEffect)((function(){d().then((function(e){return S(e)})).catch((function(e){E("No connection with server."),B("error")}))}),[]);return Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"Phonebook"}),Object(r.jsx)(p,{type:L,message:T}),Object(r.jsx)(O,{onChange:function(e){e.preventDefault(),w(e.target.value)}}),Object(r.jsx)("h3",{children:"Add a new entry:"}),Object(r.jsx)(v,{onChangeName:function(e){e.preventDefault(),o(e.target.value)},onChangeNumber:function(e){e.preventDefault(),l(e.target.value)},onClick:function(e){if(e.preventDefault(),t.length<3)return E("Name should have more than three characters."),B("error"),setTimeout((function(){E(null)}),5e3),o(""),void l("");if(j.length<8)return E("Number should have more than eight characters."),B("error"),setTimeout((function(){E(null)}),5e3),o(""),void l("");if(y.find((function(e){return e.name===t&&e.number===j}))&&""!==t)window.alert("".concat(t," is already added to the phonebook"));else if(y.find((function(e){return e.name===t&&e.number!==j}))&&""!==t){if(window.confirm("".concat(t," is already added to the phonebook, replace the old number with the new one?"))){var n=y.find((function(e){return e.name===t})),r=Object(i.a)(Object(i.a)({},n),{},{number:j});h(n.id,r).then((function(e){S(y.map((function(n){return n.id!==e.id?n:e}))),l("")})).catch((function(e){E("An error occured."),B("error")}))}}else{f({name:t,number:j}).then((function(e){S([].concat(Object(u.a)(y),[e])),E("Added ".concat(e.name)),B("success"),setTimeout((function(){E(null)}),5e3),o(""),l("")})).catch((function(e){console.log("error shmerror"),E("An error occured."),B("error")}))}},name:t,number:j}),Object(r.jsx)("h2",{children:"Numbers"}),Object(r.jsx)(x,{list:y,filter:C})]})};a.a.render(Object(r.jsx)(g,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.ba7f24bc.chunk.js.map